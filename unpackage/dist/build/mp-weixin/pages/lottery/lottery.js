(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/lottery/lottery"],{"11d3":function(t,e,n){"use strict";n.r(e);var o=n("6eae"),a=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=a.a},"127d":function(t,e,n){"use strict";n.r(e);var o=n("680a"),a=n("11d3");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("6745");var i,s=n("f0c5"),l=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);e["default"]=l.exports},"5b37":function(t,e,n){"use strict";(function(t){n("f931"),n("921b");o(n("66fd"));var e=o(n("127d"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},6745:function(t,e,n){"use strict";var o=n("a368"),a=n.n(o);a.a},"680a":function(t,e,n){"use strict";var o={eModal:function(){return n.e("components/e-modal/e-modal").then(n.bind(null,"cb46"))},wybLoading:function(){return n.e("components/wyb-loading/wyb-loading").then(n.bind(null,"661a"))},myToast:function(){return n.e("components/my-toast/my-toast").then(n.bind(null,"c700"))},myModal:function(){return n.e("components/my-modal/my-modal").then(n.bind(null,"a84f"))}},a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__get_style([t.leverRotate])),o=t.__get_style([t.leftPan]),a=t.__get_style([t.rightPan]),r=t.__get_style([t.redRotate]),i=t.showPlume?t.__get_style([t.plumeTop]):null,s=t.__get_style([t.leftLine]),l=t.__get_style([t.rightLine]),u=t.__get_style([t.btnImg]);t.$mp.data=Object.assign({},{$root:{s0:n,s1:o,s2:a,s3:r,s4:i,s5:s,s6:l,s7:u}})},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}))},"6eae":function(t,e,n){"use strict";(function(t){function o(t){return s(t)||i(t)||r(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t,e){if(t){if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function i(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function s(t){if(Array.isArray(t))return l(t)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u={data:function(){return{swiperId:0,gifts:[],msgText:"",toastTitle:"",toastType:"",leverRotate:{},redRotate:{},leftPan:{},rightPan:{},plumeTop:{},leftLine:{},rightLine:{},lotteringFlag:!1,lottery_success_str:"中奖啦",visible:!1,btnText:"免费抽一次",lotteryNum:3,lotteryResult:{},showPlume:!1,notices:[]}},computed:{integral:function(){return this.$store.state.person.gmtIntegralNum||0},btnImg:function(){return this.lotteringFlag?n("71e5"):n("ac05")}},methods:{toggleModal:function(){this.visible?this.visible=!1:this.visible=!0},myInfo:function(){1===this.lotteryResult.trophyType&&t.navigateTo({url:"/pages/myInfo/myInfo"})},goLottery:function(){var e=this;if(!this.lotteringFlag){this.lotteringFlag=!0;var n=100;this.showPlume=!0;var o=t.upx2px(300),a=t.upx2px(70),r=t.upx2px(500),i=t.upx2px(56),s=t.upx2px(116),l=t.upx2px(56),u=t.upx2px(400),c=t.upx2px(460);setTimeout((function(){e.$set(e.plumeTop,"top",u+"px")}),n),setTimeout((function(){e.$set(e.leverRotate,"transform","rotate(15deg)  translate(-50%,0)"),e.$set(e.redRotate,"transform","rotate(70deg)  translate(-70%,0)"),e.$set(e.leftPan,"top",o+"px"),e.$set(e.leftPan,"left",a+"px"),e.$set(e.rightPan,"top",r+"px"),e.$set(e.rightPan,"right",i+"px"),e.$set(e.leftLine,"height",s+"px"),e.$set(e.rightLine,"height",l+"px"),e.$set(e.plumeTop,"top",c+"px")}),1e3+n),setTimeout((function(){e.lotteryRequest()}),2e3+n)}},lotteryRequest:function(){var t=this;this.$refs.loading.showLoading(),this.myRequest("miniProgram/api/trophy/get").then((function(e){t.$refs.loading.hideLoading(),0===e.data.status?(t.lotteryResult=e.data.data,t.lotteryNum=e.data.data2.luckyDrawNum,void 0===e.data.str?t.lottery_success_str="恭喜您已中奖":t.lottery_success_str=e.data.str,t.toggleModal(),t.$store.dispatch("changeIntegralAction",e.data.data2.integralNum),t.btnText=e.data.data2.str,0===t.lotteryNum?t.lotteringFlag=!0:t.lotteringFlag=!1):10017===e.data.status||10016===e.data.status?(t.msgText='<div style="text-align:center">'.concat(e.data.msg,"</div>"),t.$refs.modal.toggleModal(),t.lotteringFlag=!1):(t.toastTitle="系统出错",t.toastType="none",t.$refs.toast.showLoading(),t.lotteringFlag=!1),setTimeout((function(){t.plumeTop={},t.showPlume=!1,t.leverRotate={},t.redRotate={},t.leftPan={},t.rightPan={},t.leftLine={},t.rightLine={}}),500)}))},getGifts:function(){var t=this;this.swiperId=0,this.gifts=[],this.myRequest("/miniProgram/api/trophy/trophyList").then((function(e){for(var n=e.data.data.length,a=0,r=1;r<=n;r++)if(r%3===0&&(t.$set(t.gifts,r/3-1,e.data.data.slice(a,r)),a=r),n%3!==0&&r===n){for(var i=3-n%3,s=e.data.data.slice(a),l=0;l<i;l++)s.push({show:"visibility:hidden"});t.$set(t.gifts,Math.floor(r/3),s)}t.gifts=o(t.gifts)}))},getNotice:function(){var t=this;this.notices=[],this.myRequest("/miniProgram/api/trophy/someUser/list").then((function(e){e.data.data.forEach((function(e){t.notices.push("".concat(e.userName,"抽到了").concat(e.trophyName))})),t.notices=o(t.notices),t.getGifts()}))},getLotteryNum:function(){var t=this;this.myRequest("/miniProgram/api/trophy/num").then((function(e){t.btnText=e.data.data.str,t.lotteryNum=e.data.data.luckyDrawNum,0===t.lotteryNum?t.lotteringFlag=!0:t.lotteringFlag=!1}))}},onLoad:function(){this.getLotteryNum(),this.getNotice()}};e.default=u}).call(this,n("543d")["default"])},a368:function(t,e,n){}},[["5b37","common/runtime","common/vendor"]]]);